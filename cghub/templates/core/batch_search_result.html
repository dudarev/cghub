{% load search_tags %}
{% load pagination_tags %}

<h2>Results:</h2>
{% if found %}
<ul>
    <li>Submitted ids: {{ submitted }}</li>
    <li>ids with wrong format: {{ unvalidated|length }}</li>
        {% for name, count in found.items %}
        <li>Found by {{ name }}: {{ count }}</li>
        {% endfor %}
    </ul>
    {% if unvalidated %}
    <h2>Identifiers with wrong format:</h2>
        <ul>
        {% for id in unvalidated %}
        <li>{{ id }}</li>
        {% endfor %}
    </ul>
    {% endif %}
{% endif %}

<form method="POST" action="{% url batch_search_page %}">
    {% csrf_token %}
    <textarea name="ids" class="js-ids-storage" style="display: none;">{{ ids|join:' ' }}</textarea>
    <input type="hidden" name="add_to_cart" value="">

    <div class="btn-toolbar">
        <div class="cart-btn-group">
            <button class="btn ids-remove">Remove selected items</button>
            <button class="btn ids-add-to-cart">Add {{ ids|length }} items to cart</button>
        </div>
    </div>

    {% items_per_page request 10 25 50 %}

    <div class="column-select-label">
        <label for="id-columns-selector" class="js-common-tooltip" data-key="columns-menu">
            Columns:
        </label>
    </div>
    <select id="id-columns-selector" class="column-select" title="Select columns to display in results area" multiple>
        <option value="(Toggle all)">(Toggle all)</option>
    </select>

    {% include 'data_table.html' %}

    {% items_per_page request 10 25 50 %}

    {% with num_results=ids|length %}
        {% pagination %}
    {% endwith %}

    <div class="btn-toolbar">
        <div class="cart-btn-group">
            <button class="btn ids-remove">Remove selected items</button>
            <button class="btn ids-add-to-cart">Add {{ ids|length }} items to cart</button>
        </div>
    </div>
</form>
