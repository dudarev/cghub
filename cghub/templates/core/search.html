{% extends 'base.html' %}
{% load search_tags %}
{% load pagination_tags %}
{% block extra_header_css %}
    {% if debug %}
        <link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}css/core/search.less" media="all">
    {% else %}
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/core/search.css" media="all">
    {% endif %}
{% endblock %}
{% block extra_sidebar %}
    {% include 'bam_filter_sidebar.html' %}
{% endblock %}
{% block extra_content %}
    <div class="page-header">
        {% if num_results == None %}
            <h1>
                Search BAM Files
                <small>You can search BAM by different parameters</small>
            </h1>
        {% else %}
            <h1>
                Browse available data<br/>
                <small>Select and add to cart to download data or meta-data</small>
            </h1>
        {% endif %}
    </div>
    {% if num_results %}
        <div>Found {{ num_results }} results</div>
        <div class="applied-filters">{% applied_filters request %}</div>
    {% endif %}
    {% if num_results > 0 %}
        <form action="{% url cart_add_remove_files action='add' %}" method="POST" id="id_add_files_form">
            {% csrf_token %}
            <div class="btn-toolbar">
                <div class="btn-group search-btn-group">
                    <button class="btn add-to-cart-btn" type="submit">Add to cart</button>
                    <button class="btn add-all-to-cart-btn" type="button">Add all to cart</button>
                </div>
            </div>
            {% items_per_page request 10 25 50 %}
            <div class="column-select-label"><span>Columns:</span></div>
            <select class="column-select" multiple>
              <option value="(all)">(all)</option>
            </select>
            {% include 'data_table.html' %}
            {% items_per_page request 10 25 50 %}
            {% pagination %}
            <div class="btn-toolbar">
                <div class="btn-group search-btn-group">
                    <button class="btn  add-to-cart-btn" type="submit">Add to cart</button>
                    <button class="btn  add-all-to-cart-btn" type="button">Add all to cart</button>
                </div>
            </div>
        </form>
    {% elif num_results == None %}
        <form class="search-form form-search" action="{% url search_page %}">
            <input class="search-query" type="text" name="q">
        </form>
    {% else %}
        <div class="applied-filters">{% applied_filters request %}</div>
        {% if message %}
            <h4>{{ message }}</h4>
        {% endif %}
    {% endif %}
{% endblock %}
{% block extra_body_js %}
    {% if debug %}
        <script type="text/javascript" src="{{ STATIC_URL }}js/core/search.js"></script>
    {% else %}
        <script type="text/javascript" src="{{ STATIC_URL }}js/core/search.js"></script>
    {% endif %}
{% endblock %}
