{% extends 'base.html' %}
{% block title %}Batch search - {{ block.super }}{% endblock %}
{% block extra_header_css %}
    {% if debug %}
        <link rel="stylesheet/less" type="text/css" href="{{ STATIC_URL }}css/core/batch_search.less" media="all">
    {% else %}
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/core/batch_search.css" media="all">
    {% endif %}
{% endblock %}
{% block accessibility_links %}
<ul title="Accessibility links" id="accessibility-links">
    <li>
        <a href="#nav-bar" tabindex="1">
            Skip to Navigation bar
        </a>
    </li>
    <li>
        <a href="#batch-form" tabindex="2">
            Skip to batch form
        </a>
    </li>
</ul>
{% endblock %}

{% block main_content %}
<div class='batch-search-content'>

<div class="page-header">
<h1>Batch search</h1>
</div>

<form method="POST" action="." enctype="multipart/form-data">
    {% csrf_token %}
    {% if form.non_field_errors %}
        <div class="alert alert-error">
            {{ form.non_field_errors }}
        </div>
    {% endif %}
    {% if not_found %}
        <div class="alert alert-error">
            {{ not_found|length }} files were not found
        </div>
    {% endif %}
    <label for="id_text">Comma separated list of ids:</label>
    {{ form.text }}
    <label for="id_upload">Or select file:</label>
    {{ form.upload }}

    {% if not_found %}
        <input type="hidden" name="ignore" value="true" />
        <div class="batch-submit">
            <button type="submit" class="btn">Skip missed files and add to cart</button>
        </div>
        <h2>No results for next ids:</h2>
        <ul>
            {% for id in not_found %}
            <li>{{ id }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <div class="batch-submit">
            <button type="submit" class="btn">Search and add to cart</button>
        </div>
    {% endif %}
</form>
</div>
{% endblock %}
