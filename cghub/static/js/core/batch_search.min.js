jQuery(function(a){"use strict";var b={};void 0!==this.cghub?b=this.cghub:this.cghub=b,b.batch_search={init:function(){b.batch_search.cacheElements(),b.batch_search.initFlexigrid(),b.batch_search.bindEvents()},cacheElements:function(){b.batch_search.$searchTable=a("table.data-table"),b.batch_search.$removeBtn=a(".ids-remove"),b.batch_search.$addToCartBtn=a(".ids-add-to-cart"),b.batch_search.$addToCartInput=a("input[name=add_to_cart]"),b.batch_search.$ResetBtn=a("button[type=reset]"),b.batch_search.$idsStorage=a(".js-ids-storage"),b.batch_search.$paginationLinks=a(".pagination li a"),b.batch_search.$form=a("form"),b.batch_search.$items_per_page_links=a(".items-per-page-label a")},bindEvents:function(){b.batch_search.$removeBtn.on("click",b.batch_search.removeIDs),b.batch_search.$paginationLinks.on("click",b.batch_search.goToPage),b.batch_search.$items_per_page_links.on("click",b.batch_search.goToPage),b.batch_search.$addToCartBtn.on("click",b.batch_search.addToCart),b.batch_search.$ResetBtn.on("click",b.batch_search.clearForm)},initFlexigrid:function(){b.batch_search.$searchTable.flexigrid({height:"auto",showToggleBtn:!1}),a(".data-table").css("visibility","visible");var c=a(".bDiv table");c.wrap(a("<fieldset/>")),c.parent().prepend(a('<legend class="hidden">Select files to remove from:</legend>')),a(".sort-link").attr("title","").attr("href","#").on("click",function(){return!1})},clearForm:function(){var c=b.batch_search.$form.find("input[type=file]");return b.batch_search.$form.length&&(a.browser.msie?c.replaceWith(c.clone()):c.val(""),b.batch_search.$form.find("textarea").val("")),!1},removeIDs:function(){if(b.selected.save(),!b.selected.exists)return!1;var c=b.batch_search.$idsStorage.val().split(" ");a.each(b.selected.get_ids_list(),function(a,b){var d=c.indexOf(b);-1!=d&&c.splice(d,1)}),b.batch_search.$idsStorage.val(c.join(" "))},goToPage:function(){var c=a(this);if(c.parent().hasClass("disabled")||c.parent().hasClass("active"))return!1;var d=a(this).attr("href");return b.batch_search.$form.attr("action",d).submit(),!1},addToCart:function(){b.batch_search.$addToCartInput.val("true")}},b.batch_search.init()}),jQuery(function(a){"use strict";var b={};void 0!==this.cghub?b=this.cghub:this.cghub=b,b.selected={_storage_key:"selectedItems",exists:!1,items:{},init:function(){var c=sessionStorage.getItem(b.selected._storage_key);null!==c&&(b.selected.items=a.parseJSON(c),sessionStorage.setItem(b.selected._storage_key,"{}")),b.selected.count()},save:function(){var c=a('input[type="checkbox"][name="selected_files"]:checked');c.each(function(c,d){b.selected.add(a(d).val())});var c=a('input[type="checkbox"][name="selected_files"]:not(:checked)');c.each(function(c,d){delete b.selected.items[a(d).val()]}),sessionStorage.setItem(b.selected._storage_key,JSON.stringify(b.selected.items))},add:function(c){var d=a('input[type="checkbox"][value="'+c+'"]');d.length&&(b.selected.items[c]=d.data(),b.selected.exists=!0)},ids:function(){var a=[];for(var c in b.selected.items)a.push(c);return a},get_ids_list:function(){return sessionStorage.setItem(b.selected._storage_key,"{}"),b.selected.ids()},get_data_list:function(){var c=[];return a.each(b.selected.items,function(a,b){c.push(b)}),sessionStorage.setItem(b.selected._storage_key,"{}"),c},count:function(){var a=0;for(var c in b.selected.items)a+=1;return b.selected.exists=a>0?!0:!1,a}},b.selected.init(),b.table={clearSelectionTimeout:void 0,init:function(){b.table.cacheElements(),b.table.bindEvents(),b.table.$selectAllCheckbox.removeAttr("disabled"),b.table.repairSelection()},cacheElements:function(){b.table.$itemsPerPageLink=a(".items-per-page-label > a"),b.table.$pageLink=a(".pagination ul li a"),b.table.$selectAllCheckbox=a(".js-select-all"),b.table.$checkboxes=a(".data-table-checkbox"),b.table.$flexigrid=a(".flexigrid"),b.table.$tableContainer=b.table.$flexigrid.find(".bDiv"),b.table.$tableHeaderContainer=b.table.$flexigrid.find(".hDiv")},bindEvents:function(){b.table.activateItemDetailsLinks(),b.table.$itemsPerPageLink.unbind("click"),b.table.$itemsPerPageLink.on("click",b.selected.save),b.table.$pageLink.on("click",b.selected.save),b.table.$selectAllCheckbox.on("change",b.table.changeCheckboxes),b.table.$checkboxes.on("change",b.table.updateSelectAll),b.table.$checkboxes.on("focusin",b.table.tableCheckboxFocus),b.table.$checkboxes.on("focusout",b.table.tableCheckboxFocus),b.table.$flexigrid.on("keydown",b.table.arrowPress),b.table.$tableHeaderContainer.on("scroll",function(){b.table.$tableContainer.scrollLeft(b.table.$tableHeaderContainer.scrollLeft())}),b.table.$flexigrid.find(".details-link").contextmenu()},activateItemDetailsLinks:function(){a(document).on("click",".bDiv .details-link",function(){var c=a(this),d=a(c.attr("data-target")),e=!1;return d.on("shown",function(){e||d.find(".modal-body").load(c.attr("data-details-url")+"?ajax=1",function(a,c){"error"==c?d.find(".modal-body").html('There was an error loading data. Please contact admin: <a href="mailto:'+b.vars.supportEmail+'">'+b.vars.supportEmail+"</a>"):e=!0})}).on("show",function(){d.find(".modal-body").html("Loading ..."),d.find(".modal-label").html("Details for Analysis Id "+c.parents("tr").attr("data-analysis_id"))}).modal("show"),!1}),a(document).on("click",".js-details-popup",function(){var b=a(a(this).parents("ul").data("e").target).parents("td");return b.trigger("click"),!1}),a(document).on("click",".js-details-page",function(){var b=a(a(this).parents("ul").data("e").target).parents("td");return window.open(b.attr("data-details-url"),"_blank"),window.focus(),!1}),a.browser.msie&&a(document).on("click",".js-cart-add-item-button",function(){var b=a(this).parent().attr("action"),c=document.createElement("form");return c.action=b,c.method="POST",c.id="ie-form",document.body.appendChild(c),c.submit(),document.body.removeChild(c),!1})},changeCheckboxes:function(){b.table.$checkboxes.prop("checked",a(this).is(":checked"))},updateSelectAll:function(){b.table.$selectAllCheckbox.prop("checked",b.table.$checkboxes.length==a(".data-table-checkbox:checked").length)},repairSelection:function(){var c=b.selected.ids();if(c.length){for(var d in c){var e=a(".data-table-checkbox[value="+c[d]+"]");e.length&&e.prop("checked",!0)}a("input.data-table-checkbox:checked").length==a("input.data-table-checkbox").length&&a(".js-select-all").prop("checked",!0)}},tableCheckboxFocus:function(c){"focusin"==c.type?a(this).parents("td").addClass("tdSelected"):"focusout"==c.type&&(a(this).parents("td").removeClass("tdSelected"),b.table.clearSelectionTimeout&&clearTimeout(b.table.clearSelectionTimeout),b.table.clearSelectionTimeout=setTimeout(function(){var b=a(".tdSelected");1!=b.length||b.find("input").length||b.removeClass("tdSelected")},500))},arrowPress:function(c){var d=c.which?c.which:c.keyCode;if(c.ctrlKey&&13==d){var e=a("td.tdSelected");return e.length&&(window.open(e.parents("tr").attr("data-details-url"),"_blank"),window.focus()),!1}if(c.altKey){if(18==d)return!1;if(13==d)return a("td.tdSelected").click(),!1;if(-1!=a.inArray(d,[37,39,38,40])){var f=a("td.tdSelected");f.length>1&&(f=f.eq(1));var g=f,h=f.parents("tr"),i=h.children().index(f),j=h;if(37==d)do g=a(g).prev();while(g.is("td")&&!a(g).is(":visible"));if(39==d)do g=a(g).next();while(g.is("td")&&!a(g).is(":visible"));if(38==d){if(j=a(j).prev(),!j.is("tr"))return!1;g=j.find("td:nth-child("+(i+1)+")")}if(40==d){if(j=a(j).next(),!j.is("tr"))return!1;g=j.find("td:nth-child("+(i+1)+")")}return g.is("td")?(a(".tdSelected").removeClass("tdSelected"),g.addClass("tdSelected"),g.parents("tr").find("input").focus(),b.table.scrollTableToCell(g),!1):!1}}},scrollTableToCell:function(c){var d=a(c).offset().left,e=d+a(c).width(),f=b.table.$flexigrid.offset().left,g=f+b.table.$flexigrid.width();e>g&&b.table.$tableContainer.scrollLeft(b.table.$tableContainer.scrollLeft()+e-g+50),f>d&&b.table.$tableContainer.scrollLeft(b.table.$tableContainer.scrollLeft()-f+d-50)}},b.table.init()});