jQuery(function(a){"use strict";var b={};void 0!==this.cghub?b=this.cghub:this.cghub=b,b.batch_search={init:function(){b.batch_search.cacheElements(),b.batch_search.initFlexigrid(),b.batch_search.bindEvents()},cacheElements:function(){b.batch_search.$searchTable=a("table.data-table"),b.batch_search.$removeBtn=a(".ids-remove"),b.batch_search.$addToCartBtn=a(".ids-add-to-cart"),b.batch_search.$addToCartInput=a("input[name=add_to_cart]"),b.batch_search.$ResetBtn=a("button[type=reset]"),b.batch_search.$idsStorage=a(".js-ids-storage"),b.batch_search.$paginationLinks=a(".pagination li a"),b.batch_search.$form=a("form"),b.batch_search.$items_per_page_links=a(".items-per-page-label a")},bindEvents:function(){b.batch_search.$removeBtn.on("click",b.batch_search.removeIDs),b.batch_search.$paginationLinks.on("click",b.batch_search.goToPage),b.batch_search.$items_per_page_links.on("click",b.batch_search.goToPage),b.batch_search.$addToCartBtn.on("click",b.batch_search.addToCart),b.batch_search.$ResetBtn.on("click",b.batch_search.clearForm)},initFlexigrid:function(){b.batch_search.$searchTable.flexigrid({height:"auto",showToggleBtn:!1}),a(".data-table").css("visibility","visible");var c=a(".bDiv table");c.wrap(a("<fieldset/>")),c.parent().prepend(a('<legend class="hidden">Select files to remove from:</legend>')),a(".sort-link").attr("title","").attr("href","#").on("click",function(){return!1})},clearForm:function(){var c=b.batch_search.$form.find("input[type=file]");return b.batch_search.$form.length&&(a.browser.msie?c.replaceWith(c.clone()):c.val(""),b.batch_search.$form.find("textarea").val("")),!1},removeIDs:function(){if(b.selected.save(),!b.selected.exists)return!1;var c=b.batch_search.$idsStorage.val().split(" ");a.each(b.selected.get_ids_list(),function(a,b){var d=c.indexOf(b);-1!=d&&c.splice(d,1)}),b.batch_search.$idsStorage.val(c.join(" "))},goToPage:function(){var c=a(this);if(c.parent().hasClass("disabled")||c.parent().hasClass("active"))return!1;var d=a(this).attr("href");return b.batch_search.$form.attr("action",d).submit(),!1},addToCart:function(){b.batch_search.$addToCartInput.val("true")}},b.batch_search.init()}),!function(a){"use strict";function b(){a(".context-menu").css("display","none").data("e",void 0)}var c=function(c){a(c).on("click.context-menu.data-api",this.show),a(c).on("keydown.context-menu.data-api",this.show),a("html").on("click.context-menu.data-api",b),a(".dropdown-close").on("focus.context-menu.data-api",b)};c.prototype={constructor:c,show:function(c){var d=a(this);if(!d.is(".disabled, :disabled")){b();var e=0,f=0;if(c.clientX)e=c.clientX,f=c.clientY;else{if(c.ctrlKey||c.altKey)return;var g=a(c.target).offset(),h=c.which?c.which:c.keyCode;if(13!=h&&32!=h)return b(),void 0;e=g.left-a(window).scrollLeft(),f=g.top+a(c.target).outerHeight()-a(window).scrollTop()}var i=a(d.data("context-menu")),j="menu-item-additional",k=a(c.target).parents("tr").data("menu").split(",");return a("."+j).remove(),a.each(k,function(b,c){var d=c.split("|");2==d.length&&i.find(".dropdown-bottom").before(a('<li class="'+j+'"><a href="'+d[1]+'" target="_blank" tabindex="55">'+d[0]+"</a></li>"))}),i.data("e",c).css("position","fixed").css("left",e).css("top",f).css("display","block"),i.find("li").first().find("a").focus(),!1}}},a.fn.contextmenu=function(){return this.each(function(){var d=a(this);d.data("context-menu-obj")||(d.data("context-menu-obj",new c(this)),a(document).on("keydown","#table-context-menu",function(a){var c=a.which?a.which:a.keyCode;return 27==c?(b(),!1):void 0}))})},a.fn.contextmenu.Constructor=c}(jQuery),jQuery(function(a){"use strict";var b={};void 0!==this.cghub?b=this.cghub:this.cghub=b,b.selected={_storage_key:"selectedItems",exists:!1,items:{},init:function(){var c=sessionStorage.getItem(b.selected._storage_key);null!==c&&(b.selected.items=a.parseJSON(c),sessionStorage.setItem(b.selected._storage_key,"{}")),b.selected.count()},save:function(){var c=a('input[type="checkbox"]:[name="selected_files"]:checked');c.each(function(c,d){b.selected.add(a(d).val())});var c=a('input[type="checkbox"]:[name="selected_files"]:not(:checked)');c.each(function(c,d){delete b.selected.items[a(d).val()]}),sessionStorage.setItem(b.selected._storage_key,JSON.stringify(b.selected.items))},add:function(c){var d=a('input[type="checkbox"]:[value="'+c+'"]');d.length&&(b.selected.items[c]=d.data(),b.selected.exists=!0)},ids:function(){var a=[];for(var c in b.selected.items)a.push(c);return a},get_ids_list:function(){return sessionStorage.setItem(b.selected._storage_key,"{}"),b.selected.ids()},get_data_list:function(){var c=[];return a.each(b.selected.items,function(a,b){c.push(b)}),sessionStorage.setItem(b.selected._storage_key,"{}"),c},count:function(){var a=0;for(var c in b.selected.items)a+=1;return b.selected.exists=a>0?!0:!1,a}},b.selected.init(),b.table={clearSelectionTimeout:void 0,init:function(){b.table.cacheElements(),b.table.bindEvents(),b.table.$selectAllCheckbox.removeAttr("disabled"),b.table.repairSelection()},cacheElements:function(){b.table.$itemsPerPageLink=a(".items-per-page-label > a"),b.table.$pageLink=a(".pagination ul li a"),b.table.$selectAllCheckbox=a(".js-select-all"),b.table.$checkboxes=a(".data-table-checkbox"),b.table.$flexigrid=a(".flexigrid"),b.table.$tableContainer=b.table.$flexigrid.find(".bDiv"),b.table.$tableHeaderContainer=b.table.$flexigrid.find(".hDiv")},bindEvents:function(){b.table.activateItemDetailsLinks(),b.table.$itemsPerPageLink.on("click",b.selected.save),b.table.$pageLink.on("click",b.selected.save),b.table.$selectAllCheckbox.on("change",b.table.changeCheckboxes),b.table.$checkboxes.on("change",b.table.updateSelectAll),b.table.$checkboxes.on("focusin",b.table.tableCheckboxFocus),b.table.$checkboxes.on("focusout",b.table.tableCheckboxFocus),b.table.$flexigrid.on("keydown",b.table.arrowPress),b.table.$tableHeaderContainer.on("scroll",function(){b.table.$tableContainer.scrollLeft(b.table.$tableHeaderContainer.scrollLeft())}),b.table.$flexigrid.find(".details-link").contextmenu()},showDetailsPopup:function(c){var d=a(c.attr("data-target")),e=!1;return d.on("shown",function(){e||d.find(".modal-body").load(c.attr("data-details-url")+"?ajax=1",function(a,c){"error"==c?d.find(".modal-body").html('There was an error loading data. Please contact admin: <a href="mailto:'+b.vars.supportEmail+'">'+b.vars.supportEmail+"</a>"):e=!0})}).on("show",function(){d.find(".modal-body").html("Loading ..."),d.find(".modal-label").html("Details for Analysis Id "+c.parents("tr").attr("data-analysis_id"))}).modal("show"),!1},activateItemDetailsLinks:function(){a(document).on("click",".js-details-popup",function(){var c=a(a(this).parents("ul").data("e").target).parents("td");return b.table.showDetailsPopup(c),!1}),a(document).on("keydown",".js-details-popup",function(c){var d=c.which?c.which:c.keyCode;if(13==d||32==d){var e=a(a(c.target).parents("ul").data("e").target);return b.table.showDetailsPopup(e),!1}}),a(document).on("click",".js-cart-add-item-button",function(){var b=document.createElement("form");return b.action=a(this).data("action"),b.method="POST",b.id="ie-form",document.body.appendChild(b),b.submit(),!1})},changeCheckboxes:function(){b.table.$checkboxes.prop("checked",a(this).is(":checked"))},updateSelectAll:function(){b.table.$selectAllCheckbox.prop("checked",b.table.$checkboxes.length==a(".data-table-checkbox:checked").length)},repairSelection:function(){var c=b.selected.ids();if(c.length){for(var d=0;d<c.length;d++){var e=a(".data-table-checkbox[value="+c[d]+"]");e.length&&e.prop("checked",!0)}a("input.data-table-checkbox:checked").length==a("input.data-table-checkbox").length&&a(".js-select-all").prop("checked",!0)}},tableCheckboxFocus:function(c){"focusin"==c.type?a(this).parents("td").addClass("tdSelected"):"focusout"==c.type&&(a(this).parents("td").removeClass("tdSelected"),b.table.clearSelectionTimeout&&clearTimeout(b.table.clearSelectionTimeout),b.table.clearSelectionTimeout=setTimeout(function(){var b=a(".tdSelected");1!=b.length||b.find("input").length||b.removeClass("tdSelected")},500))},arrowPress:function(c){var d=c.which?c.which:c.keyCode;if(c.ctrlKey&&13==d){var e=a("td.tdSelected");return e.length&&(window.open(e.parents("tr").find(".details-link").attr("data-details-url"),"_blank"),window.focus()),!1}if(c.altKey){if(18==d)return!1;if(13==d){var f=a("td.tdSelected").parents("tr").find(".details-link");return b.table.showDetailsPopup(f),!1}if(-1!=a.inArray(d,[37,39,38,40])){var g=a("td.tdSelected");g.length>1&&(g=g.eq(1));var h=g,i=g.parents("tr"),j=i.children().index(g),k=i;if(37==d)do h=a(h).prev();while(h.is("td")&&!a(h).is(":visible"));if(39==d)do h=a(h).next();while(h.is("td")&&!a(h).is(":visible"));if(38==d){if(k=a(k).prev(),!k.is("tr"))return!1;h=k.find("td:nth-child("+(j+1)+")")}if(40==d){if(k=a(k).next(),!k.is("tr"))return!1;h=k.find("td:nth-child("+(j+1)+")")}return h.is("td")?(a(".tdSelected").removeClass("tdSelected"),h.addClass("tdSelected"),h.parents("tr").find("input").focus(),b.table.scrollTableToCell(h),!1):!1}}},scrollTableToCell:function(c){var d=a(c).offset().left,e=d+a(c).width(),f=b.table.$flexigrid.offset().left,g=f+b.table.$flexigrid.width();e>g&&b.table.$tableContainer.scrollLeft(b.table.$tableContainer.scrollLeft()+e-g+50),f>d&&b.table.$tableContainer.scrollLeft(b.table.$tableContainer.scrollLeft()-f+d-50)}},b.table.init()});