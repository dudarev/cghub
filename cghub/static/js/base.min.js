jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.base={init:function(){t.base.cacheElements(),t.base.bindEvents()},cacheElements:function(){t.base.$navbarAnchors=e("div.navbar ul.nav li a"),t.base.$navbarListItem=e("div.navbar ul li")},bindEvents:function(){t.base.defineActiveLink(),t.base.activateItemDetailsLinks(),e(document).on("change",".js-select-all",t.base.changeCheckboxes),e(document).on("change",".data-table-checkbox",t.base.updateSelectAll)},changeCheckboxes:function(){return e(".data-table-checkbox").prop("checked",e(this).is(":checked")),!1},updateSelectAll:function(){e(".js-select-all").prop("checked",e(".data-table-checkbox").length==e(".data-table-checkbox:checked").length)},defineActiveLink:function(){t.base.$navbarAnchors.each(t.base.resetActiveLink)},resetActiveLink:function(t,n){var r=e(n);n.href!==window.location.origin+window.location.pathname?r.closest("li").removeClass("active"):r.closest("li").addClass("active")},activateItemDetailsLinks:function(){e(document).on("click",".bDiv tr",function(t){if(t.target.localName=="input")return;var n=e(this),r=e(n.attr("data-target")),i=!1;return r.on("shown",function(){i||r.find(".modal-body").load(n.attr("data-details-url"),function(e,t,n){t=="error"?r.find(".modal-body").html("There was an error loading data. Please contact admin."):i=!0})}).on("show",function(){r.find(".modal-body").html("Loading ..."),r.find(".modal-label").html("Details for UUID "+n.attr("data-uuid"))}).modal("show"),!1}),e(document).on("click",".js-details-popup",function(){var t=e(e(this).parents("ul").data("e").target).parents("tr");return t.trigger("click"),!1}),e(document).on("click",".js-details-page",function(){var t=e(e(this).parents("ul").data("e").target).parents("tr");return window.open(t.attr("data-details-url"),"_blank"),window.focus(),!1})}},t.base.init()}),jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.help={hintShow:!1,keysIgnore:["uuid","upload time","last modified","barcode","files size"],hintUrl:"/help/hint/",textUrl:"/help/text/",init:function(){t.help.bindEvents(),t.help.activateTableHeaderTooltipHelp(),t.help.activateTableCellTooltipHelp(),t.help.activateFilterTooltipHelp(),t.help.activateFilterItemTooltipHelp(),t.help.activateHelpLinks()},removeTooltips:function(){t.help.tooltipShowTimeout&&clearTimeout(t.help.tooltipShowTimeout),t.help.tooltipHideTimeout&&clearTimeout(t.help.tooltipHideTimeout),t.help.hintShow=!1,e(".js-tooltip").remove()},showToolTip:function(n,r){if(!r.length)return;e.ajax({url:t.help.hintUrl,dataType:"json",data:{key:r},type:"GET",success:function(r){if(!t.help.hintShow)return;t.help.removeTooltips();if(r.success){var i=n.offset().left-e(window).scrollLeft(),s=n.offset().top-e(window).scrollTop(),o=e('<div class="tooltip js-tooltip"></div>').html(r.text).appendTo(e("body"));o.css({top:s-o.outerHeight(),left:i}).fadeIn(100,"swing")}}})},bindEvents:function(){e(window).scroll(function(){t.help.removeTooltips()})},activateHelpLinks:function(){e(document).on("click",".js-help-link",function(){var n=e("#helpTextModal");if(!n.length)return;var r=e(this).data("slug");return e.ajax({url:t.help.textUrl,dataType:"json",data:{slug:r},type:"GET",success:function(e){e.success&&(t.help.removeTooltips(),n.find(".modal-label").text(e.title),n.find(".modal-body").html(e.content),n.modal())}}),!1})},activateTooltipsForSelector:function(n,r){e(document).on("mouseenter",n,function(n){t.help.tooltipShowTimeout=setTimeout(function(){var i=e(n.target);t.help.hintShow=!0,t.help.showToolTip(i,r(i))},1500)}),e(document).on("mouseenter",".js-tooltip, .js-tooltip > *",function(){t.help.tooltipHideTimeout&&clearTimeout(t.help.tooltipHideTimeout)}),e(document).on("mouseout",n+", .js-tooltip, .js-tooltip > *",function(n){if(e(n.relatedTarget).parents(".js-tooltip").length)return;if(e(n.target).parents(".js-tooltip").length)return;t.help.tooltipShowTimeout&&clearTimeout(t.help.tooltipShowTimeout),t.help.tooltipHideTimeout=setTimeout(function(){t.help.tooltipHideTimeout&&(clearTimeout(t.help.tooltipHideTimeout),e(".tooltip").remove(),t.help.hintShow=!1)},0)})},activateTableHeaderTooltipHelp:function(){t.help.activateTooltipsForSelector(".hDivBox a",function(e){return e.text().replace(decodeURI("%C2%A0%E2%86%93"),"")})},activateTableCellTooltipHelp:function(){t.help.activateTooltipsForSelector(".bDiv td div",function(n){if(!n.text().length)return"";var r=n.parent().index(),i=e(".hDivBox table").find("tr").eq(0).find("th").eq(r).text().replace(decodeURI("%C2%A0%E2%86%93"),"");return e.inArray(i.toLowerCase(),t.help.keysIgnore)!=-1?"":i+":"+n.text()})},activateFilterTooltipHelp:function(){t.help.activateTooltipsForSelector(".sidebar h5",function(e){return e.text().replace(":","").replace("By ","")})},activateFilterItemTooltipHelp:function(){t.help.activateTooltipsForSelector(".sidebar label",function(n){var r=n.parents(".ui-dropdownchecklist-dropcontainer-wrapper").prev().prev().prev().text();return r=r.replace(":","").replace("By ",""),e.inArray(r.toLowerCase(),t.help.keysIgnore)!=-1?"":r+":"+n.text()})}},t.help.init()});