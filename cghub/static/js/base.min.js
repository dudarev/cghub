jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.base={usedReservedCharsTitle:'Using "*" or "?" in search query are disallowed',usedReservedCharsContent:'"*" and "?" chars reserved for future extensions',reservedChars:"*?",tabPressed:0,init:function(){t.base.cacheElements(),t.base.bindEvents(),t.base.mockIePlaceholder(),t.base.activateSkipNavigation()},cacheElements:function(){t.base.$navbarAnchors=e("div.navbar ul.nav li a"),t.base.$navbarListItem=e("div.navbar ul li"),t.base.$messageModal=e("#messageModal"),t.base.$messageModal=e("#messageModal"),t.base.$searchForm=e("form.navbar-search"),t.base.$accessibilityLinks=e("#accessibility-links")},bindEvents:function(){t.base.defineActiveLink(),t.base.activateTaskStatusChecking(),t.base.$searchForm.on("submit",t.base.checkSearchField)},showMessage:function(e,n){t.base.$messageModal.find(".modal-label").text(e),t.base.$messageModal.find(".modal-body").html(n),t.base.$messageModal.modal()},defineActiveLink:function(){t.base.$navbarAnchors.each(t.base.resetActiveLink)},resetActiveLink:function(t,n){var r=e(n);n.href!==window.location.origin+window.location.pathname?r.closest("li").removeClass("active"):r.closest("li").addClass("active")},activateSkipNavigation:function(){e("#main-content").length||e(".base-container").attr("id","main-content");if(e.browser.webkit&&window.location.hash){var n=e(window.location.hash);n.length&&setTimeout(function(){e(window).scrollTop(n.offset().top),n.focus()},0)}t.base.$accessibilityLinks.find("a").on("click",function(){var t=e(e(this).attr("href"));if(t.length){e(window).scrollTop(t.offset().top-50);var n=t.find("a, input, button, .ui-dropdownchecklist-selector").filter(":visible");n.length?n.eq(0).focus():(t.focus(),e(this).parents("ul").css({height:0}))}return!1}),t.base.$accessibilityLinks.on("focusin",function(){t.base.hideSkipLinksTimeout&&clearTimeout(t.base.hideSkipLinksTimeout),e(this).css({height:"auto"})}).on("focusout",function(n){var r=e(this);t.base.hideSkipLinksTimeout=setTimeout(function(){r.css({height:0})},100)})},activateTaskStatusChecking:function(){setTimeout(t.base.activateTaskStatusChecking,3e4);var n=e.cookie("active_tasks");if(n){var r=n.split(",")[0];e.ajax({url:t.vars.taskStatusUrl,dataType:"json",data:{task_id:r},type:"GET",success:function(r){var i=r.status;if(i=="success"||i=="failure")n=n.split(","),n.length>1?(n.shift(),e.cookie("active_tasks",n.join(","),{path:"/",expires:7})):e.removeCookie("active_tasks",{path:"/"});i=="failure"&&(t.base.$messageModal.find(".modal-label").text("Error Adding to Cart"),t.base.$messageModal.find(".modal-body").html('There was an error while adding to the cart. Please contact admin: <a href="mailto:support@cghub.ucsc.edu">support@cghub.ucsc.edu</a>'),t.base.$messageModal.modal())}})}},mockIePlaceholder:function(){e("input[placeholder]").placeholder(),e.browser.msie&&e("input[placeholder]").css({height:"18px","line-height":"18px"})},checkSearchField:function(){var n=e(this).find("input").val();for(var r=0;r<t.base.reservedChars.length;r++)if(n.indexOf(t.base.reservedChars[r])!=-1)return t.base.showMessage(t.base.usedReservedCharsTitle,t.base.usedReservedCharsContent),!1;return!0}},t.base.init()}),jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.help={hoverTime:250,hintShow:!1,keysIgnore:["analysis id","uploaded","modified","barcode","files size","aliquot id","tss id","participant id","sample id"],init:function(){t.help.bindEvents(),t.help.activateTableHeaderTooltipHelp(),t.help.activateDetailsHeaderTooltipHelp(),t.help.activateColumnsDropdownTooltipHelp(),t.help.activateTableCellTooltipHelp(),t.help.activateDetailsValueTooltipHelp(),t.help.activateFilterHeaderTooltipHelp(),t.help.activateFilterSelectorItemTooltipHelp(),t.help.activateFilterTextTooltipHelp(),t.help.activateCommonTooltipHelp(),t.help.activateHelpLinks()},removeTooltips:function(){t.help.tooltipShowTimeout&&clearTimeout(t.help.tooltipShowTimeout),t.help.tooltipHideTimeout&&clearTimeout(t.help.tooltipHideTimeout),t.help.hintShow=!1,e(".js-tooltip").remove()},showToolTip:function(n,r){if(!r.length)return;e.ajax({url:t.vars.helpHintUrl,dataType:"json",data:{key:r},type:"GET",success:function(r){if(!t.help.hintShow)return;t.help.removeTooltips();if(r.success){var i=n.offset().left-e(window).scrollLeft(),s=n.offset().top-e(window).scrollTop(),o=e('<div class="tooltip js-tooltip"></div>').html(r.text).appendTo(e("body")),u=s,a=i;s<o.outerHeight()?u+=n.outerHeight():u-=o.outerHeight(),a>e(window).width()-200&&(a-=100),o.css({top:u,left:a}).fadeIn(100,"swing")}}})},bindEvents:function(){e(window).scroll(function(){t.help.removeTooltips()})},activateHelpLinks:function(){e(document).on("click",".js-help-link",function(){var n=e(this).data("slug");return e.ajax({url:t.vars.helpTextUrl,dataType:"json",data:{slug:n},type:"GET",success:function(e){e.success&&(t.help.removeTooltips(),t.base.showMessage(e.title,e.content))}}),!1})},activateTooltipsForSelector:function(n,r){e(document).on("mouseenter",n,function(n){t.help.tooltipShowTimeout=setTimeout(function(){var i=e(n.target);t.help.hintShow=!0,t.help.showToolTip(i,r(i))},t.help.hoverTime)}),e(document).on("mouseenter",".js-tooltip, .js-tooltip > *",function(){t.help.tooltipHideTimeout&&clearTimeout(t.help.tooltipHideTimeout)}),e(document).on("mouseout",n+", .js-tooltip, .js-tooltip > *",function(n){if(e(n.relatedTarget).parents(".js-tooltip").length)return;if(e(n.target).parents(".js-tooltip").length)return;t.help.tooltipShowTimeout&&clearTimeout(t.help.tooltipShowTimeout),t.help.tooltipHideTimeout=setTimeout(function(){t.help.tooltipHideTimeout&&(clearTimeout(t.help.tooltipHideTimeout),e(".tooltip").remove(),t.help.hintShow=!1)},0)})},activateTableHeaderTooltipHelp:function(){t.help.activateTooltipsForSelector(".hDivBox a",function(e){return e.text().replace(decodeURI("%C2%A0%E2%86%93"),"").replace(decodeURI("%C2%A0%E2%86%91"),"").replace(decodeURI("%20%E2%86%93"),"").replace(decodeURI("%20%E2%86%91"),"")})},activateDetailsHeaderTooltipHelp:function(){t.help.activateTooltipsForSelector("table.js-details-table th",function(e){return e.text()})},activateColumnsDropdownTooltipHelp:function(){t.help.activateTooltipsForSelector("#ddcl-id-columns-selector-ddw .ui-dropdownchecklist-item label",function(e){return e.text().replace(decodeURI("%C2%A0%E2%86%93"),"").replace(decodeURI("%C2%A0%E2%86%91"),"").replace(decodeURI("%20%E2%86%93"),"").replace(decodeURI("%20%E2%86%91"),"")})},activateTableCellTooltipHelp:function(){t.help.activateTooltipsForSelector(".bDiv td div",function(n){if(!e.trim(n.text()).length)return"";var r=n.parent().index(),i=e(".hDivBox table").find("tr").eq(0).find("th").eq(r).text().replace(decodeURI("%C2%A0%E2%86%93"),"").replace(decodeURI("%C2%A0%E2%86%91"),"").replace(decodeURI("%20%E2%86%93"),"").replace(decodeURI("%20%E2%86%91"),"");return e.inArray(i.toLowerCase(),t.help.keysIgnore)!=-1?"":i+":"+n.text()})},activateDetailsValueTooltipHelp:function(){t.help.activateTooltipsForSelector("table.js-details-table td",function(n){if(!e.trim(n.text()).length)return"";var r=n.parent().find("th").text();return e.inArray(r.toLowerCase(),t.help.keysIgnore)!=-1?"":r+":"+n.text()})},activateFilterHeaderTooltipHelp:function(){t.help.activateTooltipsForSelector(".sidebar .filter-label",function(e){return"filter:"+e.text().replace(":","").replace("By ","")})},activateFilterSelectorItemTooltipHelp:function(){t.help.activateTooltipsForSelector(".sidebar .ui-dropdownchecklist-text",function(n){var r=n.parents(".ui-dropdownchecklist-dropcontainer-wrapper").prev().prev().prev().text();return r=r.replace(":","").replace("By ",""),e.inArray(r.toLowerCase(),t.help.keysIgnore)!=-1?"":r+":"+n.text()})},activateFilterTextTooltipHelp:function(){t.help.activateTooltipsForSelector(".sidebar .ui-dropdownchecklist-text-item",function(n){var r=n.parents(".ui-dropdownchecklist-selector-wrapper").prev().prev().text();return r=r.replace(":","").replace("By ",""),e.inArray(r.toLowerCase(),t.help.keysIgnore)!=-1?"":r+":"+n.text()})},activateCommonTooltipHelp:function(){t.help.activateTooltipsForSelector(".js-common-tooltip",function(e){return"common:"+e.data("key")})}},t.help.init()});