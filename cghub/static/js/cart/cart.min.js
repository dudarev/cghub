jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.cart={init:function(){t.cart.cacheElements(),t.cart.bindEvents()},cacheElements:function(){t.cart.$columnNumber=0,t.cart.$nextColumn,t.cart.$nextColumnWidth=0,t.cart.$searchTable=e("table.data-table"),t.cart.$downloadManifestXml=e(".cart-download-manifest"),t.cart.$downloadMetadataXml=e(".cart-download-metadata"),t.cart.$downloadMetadataTsv=e(".cart-download-summary"),t.cart.$removeBtn=e(".cart-remove"),t.cart.$clearBtn=e(".cart-clear")},bindEvents:function(){t.cart.$searchTable.flexigrid({height:"auto",showToggleBtn:!1}),e(".flexigrid").attr("id","data-table"),e(".flexigrid .bDiv tr").contextmenu(),e(".data-table").css("visibility","visible"),e(".ui-dropdownchecklist-dropcontainer").attr("tabindex",-1),t.cart.$downloadManifestXml.on("click",t.cart.downloadManifest),t.cart.$downloadMetadataXml.on("click",t.cart.downloadMetadata),t.cart.$downloadMetadataTsv.on("click",t.cart.downloadSummary),t.cart.$removeBtn.on("click",t.cart.removeFromCart),t.cart.$clearBtn.on("click",t.cart.clearCart)},removeFromCart:function(){var t=e(this);if(t.hasClass("disabled"))return!1;var n=t.closest("form");n.attr("action",n.attr("action").replace(/\/[a-z_]+\/$/,"/remove/"))},clearCart:function(){var t=e(this);if(t.hasClass("disabled"))return!1;var n=t.closest("form");n.attr("action",n.attr("action").replace(/\/[a-z_]+\/$/,"/clear/"))},downloadManifest:function(){var t=e(this);if(t.hasClass("disabled"))return!1;var n=t.closest("form");n.attr("action",n.attr("action").replace(/\/[a-z_]+\/$/,"/manifest/"))},downloadMetadata:function(){var t=e(this);if(t.hasClass("disabled"))return!1;var n=t.closest("form");n.attr("action",n.attr("action").replace(/\/[a-z_]+\/$/,"/metadata/"))},downloadSummary:function(){var t=e(this);if(t.hasClass("disabled"))return!1;var n=t.closest("form");n.attr("action",n.attr("action").replace(/\/[a-z_]+\/$/,"/summary/"))}},t.cart.init()}),jQuery(function(e){"use strict";var t={};this.cghub!==undefined?t=this.cghub:this.cghub=t,t.table={init:function(){t.table.cacheElements(),t.table.bindEvents(),t.table.selectFiles(),t.table.$selectAllCheckbox.removeAttr("disabled")},cacheElements:function(){t.table.$itemsPerPageLink=e("div.items-per-page-label > a"),t.table.$selectAllCheckbox=e(".js-select-all"),t.table.$checkboxes=e(".data-table-checkbox"),t.table.$flexigrid=e(".flexigrid"),t.table.$tableContainer=e(".bDiv")},bindEvents:function(){t.table.activateItemDetailsLinks(),t.table.$itemsPerPageLink.on("click",t.table.saveSelectedFiles),t.table.$selectAllCheckbox.on("change",t.table.changeCheckboxes),t.table.$checkboxes.on("change",t.table.updateSelectAll),t.table.$checkboxes.on("focusin",t.table.focusInOutCheckbox),t.table.$checkboxes.on("focusout",t.table.focusInOutCheckbox),t.table.$flexigrid.on("keydown",t.table.arrowAltPress)},activateItemDetailsLinks:function(){e(document).on("click",".bDiv tr",function(t){var n=e(t.target).find("input[name=selected_files]");if(t.target.name=="selected_files"||n.length)return;var r=e(this),i=e(r.attr("data-target")),s=!1;return i.on("shown",function(){s||i.find(".modal-body").load(r.attr("data-details-url"),function(e,t,n){t=="error"?i.find(".modal-body").html("There was an error loading data. Please contact admin."):s=!0})}).on("show",function(){i.find(".modal-body").html("Loading ..."),i.find(".modal-label").html("Details for Analysis Id "+r.attr("data-analysis_id"))}).modal("show"),!1}),e(document).on("click",".js-details-popup",function(){var t=e(e(this).parents("ul").data("e").target).parents("td");return t.trigger("click"),!1}),e(document).on("click",".js-details-page",function(){var t=e(e(this).parents("ul").data("e").target).parents("tr");return window.open(t.attr("data-details-url"),"_blank"),window.focus(),!1})},changeCheckboxes:function(){t.table.$checkboxes.prop("checked",e(this).is(":checked"));return},updateSelectAll:function(){t.table.$selectAllCheckbox.prop("checked",t.table.$checkboxes.length==e(".data-table-checkbox:checked").length)},selectFiles:function(){var t=e.cookie("browser_checked_items");if(t){t=t.split(",");for(var n in t){var r=e(".data-table-checkbox[value="+t[n]+"]");r.length&&r.prop("checked",!0)}e("input.data-table-checkbox:checked").length==e("input.data-table-checkbox").length&&e(".js-select-all").prop("checked",!0),e.removeCookie("browser_checked_items",{path:"/"})}},saveSelectedFiles:function(){var t=[];e("form .data-table-checkbox").serializeArray().map(function(e){t.push(e.value)}),e.cookie("browser_checked_items",t.join(","),{path:"/",expires:7})},focusInOutCheckbox:function(t){t.type=="focusin"?e(this).parents("td").addClass("tdSelected"):t.type=="focusout"&&(e(this).parents("td").removeClass("tdSelected"),e("td.tdSelected").removeClass("tdSelected"))},arrowAltPress:function(n){var r=n.which?n.which:n.keyCode;if(n.altKey){n.preventDefault();var i=e("td.tdSelected"),s=i,o=e(i).parents("tr"),u=e(o).children().index(i),a=o;if(r==37)do s=e(s).prev();while(s.is("td")&&!e(s).is(":visible"));if(r==39)do s=e(s).next();while(s.is("td")&&!e(s).is(":visible"));if(r==38){a=e(a).prev();if(!a.is("tr"))return!1;s=a.find("td:nth-child("+(u+1)+")")}if(r==40){a=e(a).next();if(!a.is("tr"))return!1;s=a.find("td:nth-child("+(u+1)+")")}if(!s.is("td"))return!1;i.removeClass("tdSelected"),s.addClass("tdSelected"),t.table.makeVisibleOnScreen(s)}},makeVisibleOnScreen:function(n){while(e(n).offset().left+e(n).width()>t.table.$flexigrid.offset().left+t.table.$flexigrid.width())t.table.$tableContainer.scrollLeft(t.table.$tableContainer.scrollLeft()+100);while(e(n).offset().left<t.table.$flexigrid.offset().left)t.table.$tableContainer.scrollLeft(t.table.$tableContainer.scrollLeft()-100);while(e(n).offset().top+e(n).height()-e(window).scrollTop()>e(window).height())e(window).scrollTop(e(window).scrollTop()+200);while(e(n).offset().top-e(window).scrollTop()<e(".navbar").height())e(window).scrollTop(e(window).scrollTop()-200)}},t.table.init()});