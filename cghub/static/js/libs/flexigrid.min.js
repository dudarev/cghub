!function($){$.addFlex=function(t,p){if(t.grid)return!1;p=$.extend({height:200,width:"auto",striped:!0,novstripe:!1,minwidth:30,minheight:80,saveColWidth:!0,resizable:!0,url:!1,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:!1,nowrap:!0,page:1,total:1,useRp:!0,rp:15,rpOptions:[10,15,20,30,50],title:!1,idProperty:"id",pagestat:"Displaying {from} to {to} of {total} items",pagetext:"Page",outof:"of",findtext:"Find",params:[],procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:!0,hideOnSubmit:!0,autoload:!0,blockOpacity:.5,preProcess:!1,addTitleToCell:!1,dblClickResize:!1,onDragCol:!1,onToggleCol:!1,onChangeSort:!1,onDoubleClick:!1,onSuccess:!1,onError:!1,onSubmit:!1},p),$(t).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("data-width");var g={hset:{},rePosDrag:function(){var a=0-this.hDiv.scrollLeft;this.hDiv.scrollLeft>0&&(a-=Math.floor(p.cgwidth/2)),$(g.cDrag).css({top:g.hDiv.offsetTop+1});var b=this.cdpad;$.browser.mozilla&&(b+=1),$("div",g.cDrag).hide(),$("thead tr:first th:visible",this.hDiv).each(function(){var c=$("thead tr:first th:visible",g.hDiv).index(this),d=parseInt($("div",this).width());0==a&&(a-=Math.floor(p.cgwidth/2)),d=d+a+b,isNaN(d)&&(d=0),$("div:eq("+c+")",g.cDrag).css({left:d-c+"px"}).show(),a=d})},colName:function(a){return $(this.hDiv).find("th:visible:eq("+a+")").text().toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")},fixHeight:function(a){a=!1,a||(a=$(g.bDiv).height());var b=$(this.hDiv).height();$("div",this.cDrag).each(function(){$(this).height(a+b)});var c=parseInt($(g.nDiv).height());c>a?$(g.nDiv).height(a).width(200):$(g.nDiv).height("auto").width("auto"),$(g.block).css({height:a,marginBottom:-1*a});var d=g.bDiv.offsetTop+a;"auto"!=p.height&&p.resizable&&(d=g.vDiv.offsetTop),$(g.rDiv).css({height:d})},dragStart:function(a,b,c){if("colresize"==a){$(g.nDiv).hide(),$(g.nBtn).hide();var d=$("div",this.cDrag).index(c),e=$("th:visible div:eq("+d+")",this.hDiv).width();$(c).addClass("dragging").siblings().hide(),$(c).prev().addClass("dragging").show(),this.colresize={startX:b.pageX,ol:parseInt(c.style.left),ow:e,n:d},$("body").css("cursor","col-resize")}else if("vresize"==a){var f=!1;$("body").css("cursor","row-resize"),c&&(f=!0,$("body").css("cursor","col-resize")),this.vresize={h:p.height,sy:b.pageY,w:p.width,sx:b.pageX,hgo:f}}$("body").noSelect()},dragMove:function(a){if(this.colresize){var b=this.colresize.n,c=a.pageX-this.colresize.startX,d=this.colresize.ol+c,e=this.colresize.ow+c;e>p.minwidth&&($("div:eq("+b+")",this.cDrag).css("left",d),this.colresize.nw=e)}else if(this.vresize){var f=this.vresize,g=a.pageY,c=g-f.sy;if(p.defwidth||(p.defwidth=p.width),"auto"!=p.width&&!p.nohresize&&f.hgo){var h=a.pageX,i=h-f.sx,j=f.w+i;j>p.defwidth&&(this.gDiv.style.width=j+"px",p.width=j)}var k=f.h+c;(k>p.minheight||p.height<p.minheight)&&!f.hgo&&(this.bDiv.style.height=k+"px",p.height=k,this.fixHeight(k)),f=null}else this.colCopy&&($(this.dcol).addClass("thMove").removeClass("thOver"),a.pageX>this.hset.right||a.pageX<this.hset.left||a.pageY>this.hset.bottom||a.pageY<this.hset.top?$("body").css("cursor","move"):$("body").css("cursor","pointer"),$(this.colCopy).css({top:a.pageY+10,left:a.pageX+20,display:"block"}))},dragEnd:function(){if(this.colresize){var a=this.colresize.n,b=this.colresize.nw;if($("th:visible div:eq("+a+")",this.hDiv).css("width",b),$("tr",this.bDiv).each(function(){var c=$("td:visible div:eq("+a+")",this);c.css("width",b),g.addTitleToCell(c)}),this.hDiv.scrollLeft=this.bDiv.scrollLeft,$("div:eq("+a+")",this.cDrag).siblings().show(),$(".dragging",this.cDrag).removeClass("dragging"),this.rePosDrag(),this.fixHeight(),this.colresize=!1,p.colModel){var c=p.colModel[a].name;$.cookie("flexiwidths/"+c,b)}else if(p.saveColWidth){var c=this.colName(a);$.cookie("flexiwidths/"+c,b,{path:"/"})}}else this.vresize?this.vresize=!1:this.colCopy&&($(this.colCopy).remove(),null!=this.dcolt&&(this.dcoln>this.dcolt?$("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol):$("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol),this.switchCol(this.dcoln,this.dcolt),$(this.cdropleft).remove(),$(this.cdropright).remove(),this.rePosDrag(),p.onDragCol&&p.onDragCol(this.dcoln,this.dcolt)),this.dcol=null,this.hset=null,this.dcoln=null,this.dcolt=null,this.colCopy=null,$(".thMove",this.hDiv).removeClass("thMove"),$(this.cDrag).show());$("body").css("cursor","default"),$("body").noSelect(!1),g.adjustTableWidth()},adjustTableWidth:function(){var a=$(".hDivBox"),b=a.parent().width()-a.width(),c=$("th div.flLastCol",this.hDiv),d=$("th:visible:last div",this.hDiv);if(c&&d&&c.parent().index()!=d.parent().index()){var e=c.width()-parseInt(a.attr("add-width"));a.attr("add-width",0),c.css("width",e),$("tr",this.bDiv).each(function(){var a=$("td:eq("+c.parent().index()+") div",this);a.css("width",e),g.addTitleToCell(a)}),this.hDiv.scrollLeft=this.bDiv.scrollLeft,this.rePosDrag(),this.fixHeight(),c.removeClass("flLastCol"),b=a.parent().width()-2-a.width()}var f=0;a.attr("add-width")&&(f=parseInt(a.attr("add-width")));var h;0!=d.parent().index()&&b+f>0?(h=d.width()+b,a.attr("add-width",b+f)):(h=d.width()-f,a.attr("add-width",0)),d.addClass("flLastCol"),d.css("width",h),$.browser.mozilla?$(".bDiv").find("table").width(a.width()):$(".bDiv").find("table").width(a.width()-1),$("tr",this.bDiv).each(function(){var a=$("td:eq("+d.parent().index()+") div",this);a.css("width",h),g.addTitleToCell(a)}),this.hDiv.scrollLeft=this.bDiv.scrollLeft,this.rePosDrag(),this.fixHeight()},toggleCol:function(a,b){for(var c,d,e,f,h=(sessionStorage.getItem("hiddenColumns")||"").split(","),i=0;i<a.length;i++)c=a[i],c.length&&(d=$("th[axis='col"+c+"']",this.hDiv)[0],null==b&&(b=d.hidden),e=$("thead th",g.hDiv).index(d),f=$("input[value="+c+"]",g.nDiv)[0],$("input:checked",g.nDiv).length<p.minColToggle&&!b||(b?h.splice(h.indexOf(c),1):h.indexOf(c)<0&&(h=h.concat(c)),b?(d.hidden=!1,$(d).show(),f.checked=!0):(d.hidden=!0,$(d).hide(),f.checked=!1),$("tbody tr",t).each(function(){b?$("td:eq("+e+")",this).show():$("td:eq("+e+")",this).hide()}),p.onToggleCol&&p.onToggleCol(c,b)));return this.rePosDrag(),sessionStorage.setItem("hiddenColumns",h),g.adjustTableWidth(),b},switchCol:function(a,b){$("tbody tr",t).each(function(){a>b?$("td:eq("+b+")",this).before($("td:eq("+a+")",this)):$("td:eq("+b+")",this).after($("td:eq("+a+")",this))}),a>b?$("tr:eq("+b+")",this.nDiv).before($("tr:eq("+a+")",this.nDiv)):$("tr:eq("+b+")",this.nDiv).after($("tr:eq("+a+")",this.nDiv)),$.browser.msie&&$.browser.version<7&&($("tr:eq("+b+") input",this.nDiv)[0].checked=!0),this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft,this.rePosDrag()},addData:function(a){if("json"==p.dataType&&(a=$.extend({rows:[],page:0,total:0},a)),p.preProcess&&(a=p.preProcess(a)),$(".pReload",this.pDiv).removeClass("loading"),this.loading=!1,!a)return $(".pPageStat",this.pDiv).html(p.errormsg),!1;if(p.total="xml"==p.dataType?+$("rows total",a).text():a.total,0==p.total)return $("tr, a, td, div",t).unbind(),$(t).empty(),p.pages=1,p.page=1,this.buildpager(),$(".pPageStat",this.pDiv).html(p.nomsg),!1;p.pages=Math.ceil(p.total/p.rp),p.page="xml"==p.dataType?+$("rows page",a).text():a.page,this.buildpager();var b=document.createElement("tbody");if("json"==p.dataType)$.each(a.rows,function(a,c){var d=document.createElement("tr");if(c.name&&(d.name=c.name),c.color?$(d).css("background",c.color):a%2&&p.striped&&(d.className="erow"),c[p.idProperty]&&(d.id="row"+c[p.idProperty]),$("thead tr:first th",g.hDiv).each(function(){var a=document.createElement("td"),b=$(this).attr("axis").substr(3);a.align=this.align,a.innerHTML="undefined"==typeof c.cell?c[p.colModel[b].name]:"undefined"!=typeof c.cell[b]?null!=c.cell[b]?c.cell[b]:"":c.cell[p.colModel[b].name];var e=a.innerHTML.indexOf("<BGCOLOR=");e>0&&$(a).css("background",text.substr(e+7,7)),$(a).attr("abbr",$(this).attr("abbr")),$(d).append(a),a=null}),$("thead",this.gDiv).length<1)for(idx=0;idx<cell.length;idx++){var e=document.createElement("td");e.innerHTML="undefined"!=typeof c.cell[idx]?null!=c.cell[idx]?c.cell[idx]:"":c.cell[p.colModel[idx].name],$(d).append(e),e=null}$(b).append(d),d=null});else if("xml"==p.dataType){var c=1;$("rows row",a).each(function(){c++;var a=document.createElement("tr");$(this).attr("name")&&(a.name=$(this).attr("name")),$(this).attr("color")?$(a).css("background",$(this).attr("id")):c%2&&p.striped&&(a.className="erow");var d=$(this).attr("id");d&&(a.id="row"+d),d=null;var e=this;$("thead tr:first th",g.hDiv).each(function(){var b=document.createElement("td"),c=$(this).attr("axis").substr(3);b.align=this.align;var d=$("cell:eq("+c+")",e).text(),f=d.indexOf("<BGCOLOR=");f>0&&$(b).css("background",d.substr(f+7,7)),b.innerHTML=d,$(b).attr("abbr",$(this).attr("abbr")),$(a).append(b),b=null}),$("thead",this.gDiv).length<1&&$("cell",this).each(function(){var b=document.createElement("td");b.innerHTML=$(this).text(),$(a).append(b),b=null}),$(b).append(a),a=null,e=null})}$("tr",t).unbind(),$(t).empty(),$(t).append(b),this.addCellProp(),this.rePosDrag(),b=null,a=null,c=null,p.onSuccess&&p.onSuccess(this),p.hideOnSubmit&&$(g.block).remove(),this.hDiv.scrollLeft=this.bDiv.scrollLeft,$.browser.opera&&$(t).css("visibility","visible")},changeSort:function(a){return this.loading?!0:($(g.nDiv).hide(),$(g.nBtn).hide(),p.sortname==$(a).attr("abbr")&&(p.sortorder="asc"==p.sortorder?"desc":"asc"),$(a).addClass("sorted").siblings().removeClass("sorted"),$(".sdesc",this.hDiv).removeClass("sdesc"),$(".sasc",this.hDiv).removeClass("sasc"),$("div",a).addClass("s"+p.sortorder),p.sortname=$(a).attr("abbr"),p.onChangeSort?p.onChangeSort(p.sortname,p.sortorder):this.populate(),void 0)},buildpager:function(){$(".pcontrol input",this.pDiv).val(p.page),$(".pcontrol span",this.pDiv).html(p.pages);var a=(p.page-1)*p.rp+1,b=a+p.rp-1;p.total<b&&(b=p.total);var c=p.pagestat;c=c.replace(/{from}/,a),c=c.replace(/{to}/,b),c=c.replace(/{total}/,p.total),$(".pPageStat",this.pDiv).html(c)},populate:function(){if(this.loading)return!0;if(p.onSubmit){var a=p.onSubmit();if(!a)return!1}if(this.loading=!0,!p.url)return!1;$(".pPageStat",this.pDiv).html(p.procmsg),$(".pReload",this.pDiv).addClass("loading"),$(g.block).css({top:g.bDiv.offsetTop}),p.hideOnSubmit&&$(this.gDiv).prepend(g.block),$.browser.opera&&$(t).css("visibility","hidden"),p.newp||(p.newp=1),p.page>p.pages&&(p.page=p.pages);var b=[{name:"page",value:p.newp},{name:"rp",value:p.rp},{name:"sortname",value:p.sortname},{name:"sortorder",value:p.sortorder},{name:"query",value:p.query},{name:"qtype",value:p.qtype}];if(p.params.length)for(var c=0;c<p.params.length;c++)b[b.length]=p.params[c];$.ajax({type:p.method,url:p.url,data:b,dataType:p.dataType,success:function(a){g.addData(a)},error:function(a,b,c){try{p.onError&&p.onError(a,b,c)}catch(d){}}})},doSearch:function(){p.query=$("input[name=q]",g.sDiv).val(),p.qtype=$("select[name=qtype]",g.sDiv).val(),p.newp=1,this.populate()},changePage:function(a){if(this.loading)return!0;switch(a){case"first":p.newp=1;break;case"prev":p.page>1&&(p.newp=parseInt(p.page)-1);break;case"next":p.page<p.pages&&(p.newp=parseInt(p.page)+1);break;case"last":p.newp=p.pages;break;case"input":var b=parseInt($(".pcontrol input",this.pDiv).val());isNaN(b)&&(b=1),1>b?b=1:b>p.pages&&(b=p.pages),$(".pcontrol input",this.pDiv).val(b),p.newp=b}return p.newp==p.page?!1:(p.onChangePage?p.onChangePage(p.newp):this.populate(),void 0)},addCellProp:function(){$("tbody tr td",g.bDiv).each(function(){var a=document.createElement("div"),b=$("td",$(this).parent()).index(this),c=$("th:eq("+b+")",g.hDiv).get(0);null!=c&&(p.sortname==$(c).attr("abbr")&&p.sortname&&(this.className="sorted"),$(a).css({textAlign:c.align,width:$("div:first",c)[0].style.width}),c.hidden&&$(this).css("display","none")),0==p.nowrap&&$(a).css("white-space","normal"),""==this.innerHTML&&(this.innerHTML="&nbsp;"),a.innerHTML=this.innerHTML;var d=$(this).parent()[0],e=!1;d.id&&(e=d.id.substr(3)),null!=c&&c.process&&c.process(a,e),$(this).empty().append(a).removeAttr("data-width"),g.addTitleToCell(a)})},getCellDim:function(a){var b=parseInt($(a).height()),c=parseInt($(a).parent().height()),d=parseInt(a.style.width),e=parseInt($(a).parent().width()),f=a.offsetParent.offsetTop,g=a.offsetParent.offsetLeft,h=parseInt($(a).css("paddingLeft")),i=parseInt($(a).css("paddingTop"));return{ht:b,wt:d,top:f,left:g,pdl:h,pdt:i,pht:c,pwt:e}},addRowProp:function(){$("tbody tr",g.bDiv).each(function(){$(this).click(function(a){var b=a.target||a.srcElement;return b.href||b.type?!0:($(this).toggleClass("trSelected"),p.singleSelect&&!g.multisel&&($(this).siblings().removeClass("trSelected"),$(this).toggleClass("trSelected")),void 0)}).mousedown(function(a){a.shiftKey&&($(this).toggleClass("trSelected"),g.multisel=!0,this.focus(),$(g.gDiv).noSelect()),a.ctrlKey&&($(this).toggleClass("trSelected"),g.multisel=!0,this.focus())}).mouseup(function(){g.multisel&&!e.ctrlKey&&(g.multisel=!1,$(g.gDiv).noSelect(!1))}).dblclick(function(){p.onDoubleClick&&p.onDoubleClick(this,g,p)}).hover(function(a){g.multisel&&a.shiftKey&&$(this).toggleClass("trSelected")},function(){}),$.browser.msie&&$.browser.version<7&&$(this).hover(function(){$(this).addClass("trOver")},function(){$(this).removeClass("trOver")})})},combo_flag:!0,combo_resetIndex:function(a){this.combo_flag&&(a.selectedIndex=0),this.combo_flag=!0},combo_doSelectAction:function(selObj){eval(selObj.options[selObj.selectedIndex].value),selObj.selectedIndex=0,this.combo_flag=!1},addTitleToCell:function(a){if(p.addTitleToCell){var b=$("<span />").css("display","none"),c=a instanceof jQuery?a:$(a),d=c.outerWidth(),e=0;$("body").children(":first").before(b),b.html(c.html()),b.css("font-size",""+c.css("font-size")),b.css("padding-left",""+c.css("padding-left")),e=b.innerWidth(),b.remove(),e>d?c.attr("title",c.text()):c.removeAttr("title")}},autoResizeColumn:function(a){if(p.dblClickResize){var b=$("div",this.cDrag).index(a),c=$("th:visible div:eq("+b+")",this.hDiv),d=parseInt(a.style.left),e=c.width(),f=0,h=0,i=$("<span />");$("body").children(":first").before(i),i.html(c.html()),i.css("font-size",""+c.css("font-size")),i.css("padding-left",""+c.css("padding-left")),i.css("padding-right",""+c.css("padding-right")),f=i.width(),$("tr",this.bDiv).each(function(){var a=$("td:visible div:eq("+b+")",this),c=0;i.html(a.html()),i.css("font-size",""+a.css("font-size")),i.css("padding-left",""+a.css("padding-left")),i.css("padding-right",""+a.css("padding-right")),c=i.width(),f=c>f?c:f}),i.remove(),f=p.minWidth>f?p.minWidth:f,h=d+(f-e),$("div:eq("+b+")",this.cDrag).css("left",h),this.colresize={nw:f,n:b},g.dragEnd()}},pager:0};if(p.colModel){thead=document.createElement("thead");for(var tr=document.createElement("tr"),i=0;i<p.colModel.length;i++){var cm=p.colModel[i],th=document.createElement("th");if($(th).attr("axis","col"+i),cm){var cookie_width="flexiwidths/"+cm.name;void 0!=$.cookie(cookie_width)&&(cm.width=$.cookie(cookie_width)),void 0!=cm.display&&(th.innerHTML=cm.display),cm.name&&cm.sortable&&$(th).attr("abbr",cm.name),cm.align&&(th.align=cm.align),cm.width&&$(th).attr("width",cm.width),$(cm).attr("hide")&&(th.hidden=!0),cm.process&&(th.process=cm.process)}else th.innerHTML="",$(th).attr("width",30);$(tr).append(th)}$(thead).append(tr),$(t).prepend(thead)}if(g.gDiv=document.createElement("div"),g.mDiv=document.createElement("div"),g.hDiv=document.createElement("div"),g.bDiv=document.createElement("div"),g.vDiv=document.createElement("div"),g.rDiv=document.createElement("div"),g.cDrag=document.createElement("div"),g.block=document.createElement("div"),g.nDiv=document.createElement("div"),g.nBtn=document.createElement("div"),g.iDiv=document.createElement("div"),g.tDiv=document.createElement("div"),g.sDiv=document.createElement("div"),g.pDiv=document.createElement("div"),p.usepager||(g.pDiv.style.display="none"),g.hTable=document.createElement("table"),g.gDiv.className="flexigrid","auto"!=p.width&&(g.gDiv.style.width=p.width+"px"),$.browser.msie&&$(g.gDiv).addClass("ie"),p.novstripe&&$(g.gDiv).addClass("novstripe"),$(t).before(g.gDiv),$(g.gDiv).append(t),p.buttons){g.tDiv.className="tDiv";var tDiv2=document.createElement("div");tDiv2.className="tDiv2";for(var i=0;i<p.buttons.length;i++){var btn=p.buttons[i];if(btn.separator)$(tDiv2).append("<div class='btnseparator'></div>");else{var btnDiv=document.createElement("div");btnDiv.className="fbutton",btnDiv.innerHTML="<div><span>"+(btn.hidename?"&nbsp;":btn.name)+"</span></div>",btn.bclass&&$("span",btnDiv).addClass(btn.bclass).css({paddingLeft:20}),btn.bimage&&$("span",btnDiv).css("background","url("+btn.bimage+") no-repeat center left"),$("span",btnDiv).css("paddingLeft",20),btn.tooltip&&($("span",btnDiv)[0].title=btn.tooltip),btnDiv.onpress=btn.onpress,btnDiv.name=btn.name,btn.id&&(btnDiv.id=btn.id),btn.onpress&&$(btnDiv).click(function(){this.onpress(this.id||this.name,g.gDiv)}),$(tDiv2).append(btnDiv),$.browser.msie&&$.browser.version<7&&$(btnDiv).hover(function(){$(this).addClass("fbOver")},function(){$(this).removeClass("fbOver")})}}$(g.tDiv).append(tDiv2),$(g.tDiv).append("<div style='clear:both'></div>"),$(g.gDiv).prepend(g.tDiv)}if(g.hDiv.className="hDiv",p.combobuttons&&$(g.tDiv2)){var btnDiv=document.createElement("div");btnDiv.className="fbutton";var tSelect=document.createElement("select");for($(tSelect).change(function(){g.combo_doSelectAction(tSelect)}),$(tSelect).click(function(){g.combo_resetIndex(tSelect)}),tSelect.className="cselect",$(btnDiv).append(tSelect),i=0;i<p.combobuttons.length;i++){var btn=p.combobuttons[i];if(!btn.separator){var btnOpt=document.createElement("option");btnOpt.innerHTML=btn.name,btn.bclass&&$(btnOpt).addClass(btn.bclass).css({paddingLeft:20}),btn.bimage&&$(btnOpt).css("background","url("+btn.bimage+") no-repeat center left"),$(btnOpt).css("paddingLeft",20),btn.tooltip&&($(btnOpt)[0].title=btn.tooltip),btn.onpress&&(btnOpt.value=btn.onpress),$(tSelect).append(btnOpt)}}$(".tDiv2").append(btnDiv)}$(t).before(g.hDiv),g.hTable.cellPadding=0,g.hTable.cellSpacing=0,$(g.hDiv).append('<div class="hDivBox"></div>'),$("div",g.hDiv).append(g.hTable);var thead=$("thead:first",t).get(0);if(thead&&$(g.hTable).append(thead),thead=null,!p.colmodel)var ci=0;$("thead tr:first th",g.hDiv).each(function(){var a=document.createElement("div");if($(this).attr("abbr")&&($(this).click(function(a){if(!$(this).hasClass("thOver"))return!1;var b=a.target||a.srcElement;return b.href||b.type?!0:(g.changeSort(this),void 0)}),$(this).attr("abbr")==p.sortname&&(this.className="sorted",a.className="s"+p.sortorder)),this.hidden&&$(this).hide(),!p.colmodel&&($(this).attr("axis","col"+ci++),p.saveColWidth)){var b=$(this).text();if(b.length){b=b.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");var c=$.cookie("flexiwidths/"+b);void 0!=c&&$(this).attr("data-width",c)}}$(a).css({textAlign:this.align,width:$(this).attr("data-width")+"px"}),a.innerHTML=this.innerHTML,$(this).empty().append(a).removeAttr("data-width").mousedown(function(a){g.dragStart("colMove",a,this)}).hover(function(){if(g.colresize||$(this).hasClass("thMove")||g.colCopy||$(this).addClass("thOver"),$(this).attr("abbr")==p.sortname||g.colCopy||g.colresize||!$(this).attr("abbr")){if($(this).attr("abbr")==p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){var a="asc"==p.sortorder?"desc":"asc";$("div",this).removeClass("s"+p.sortorder).addClass("s"+a)}}else $("div",this).addClass("s"+p.sortorder);if(g.colCopy){var b=$("th",g.hDiv).index(this);if(b==g.dcoln)return!1;b<g.dcoln?$(this).append(g.cdropleft):$(this).append(g.cdropright),g.dcolt=b}else if(!g.colresize){var c=$("th:visible",g.hDiv).index(this),d=parseInt($("div:eq("+c+")",g.cDrag).css("left")),e=jQuery(g.nBtn).outerWidth(),f=d-e+Math.floor(p.cgwidth/2);$(g.nDiv).hide(),$(g.nBtn).hide(),$(g.nBtn).css({left:f,top:g.hDiv.offsetTop}).show();var h=parseInt($(g.nDiv).width());$(g.nDiv).css({top:g.bDiv.offsetTop}),f+h>$(g.gDiv).width()?$(g.nDiv).css("left",d-h+1):$(g.nDiv).css("left",f),$(this).hasClass("sorted")?$(g.nBtn).addClass("srtd"):$(g.nBtn).removeClass("srtd")}},function(){if($(this).removeClass("thOver"),$(this).attr("abbr")!=p.sortname)$("div",this).removeClass("s"+p.sortorder);else if($(this).attr("abbr")==p.sortname){var a="asc"==p.sortorder?"desc":"asc";$("div",this).addClass("s"+p.sortorder).removeClass("s"+a)}g.colCopy&&($(g.cdropleft).remove(),$(g.cdropright).remove(),g.dcolt=null)})}),g.bDiv.className="bDiv",$(t).before(g.bDiv),$(g.bDiv).css({height:"auto"==p.height?"auto":p.height+"px"}).scroll(function(){g.scroll()}).append(t),"auto"==p.height&&$("table",g.bDiv).addClass("autoht"),g.addCellProp();var cdcol=$("thead tr:first th:first",g.hDiv).get(0);if(null!=cdcol){g.cDrag.className="cDrag",g.cdpad=0,g.cdpad+=isNaN(parseInt($("div",cdcol).css("borderLeftWidth")))?0:parseInt($("div",cdcol).css("borderLeftWidth")),g.cdpad+=isNaN(parseInt($("div",cdcol).css("borderRightWidth")))?0:parseInt($("div",cdcol).css("borderRightWidth")),g.cdpad+=isNaN(parseInt($("div",cdcol).css("paddingLeft")))?0:parseInt($("div",cdcol).css("paddingLeft")),g.cdpad+=isNaN(parseInt($("div",cdcol).css("paddingRight")))?0:parseInt($("div",cdcol).css("paddingRight")),g.cdpad+=isNaN(parseInt($(cdcol).css("borderLeftWidth")))?0:parseInt($(cdcol).css("borderLeftWidth")),g.cdpad+=isNaN(parseInt($(cdcol).css("borderRightWidth")))?0:parseInt($(cdcol).css("borderRightWidth")),g.cdpad+=isNaN(parseInt($(cdcol).css("paddingLeft")))?0:parseInt($(cdcol).css("paddingLeft")),g.cdpad+=isNaN(parseInt($(cdcol).css("paddingRight")))?0:parseInt($(cdcol).css("paddingRight")),$(g.bDiv).before(g.cDrag);var cdheight=$(g.bDiv).height(),hdheight=$(g.hDiv).height();$(g.cDrag).css({top:-hdheight+"px"}),$("thead tr:first th",g.hDiv).each(function(){var a=document.createElement("div");$(g.cDrag).append(a),p.cgwidth||(p.cgwidth=$(a).width()),$(a).css({height:cdheight+hdheight}).mousedown(function(a){g.dragStart("colresize",a,this)}).dblclick(function(){g.autoResizeColumn(this)}),$.browser.msie&&$.browser.version<7&&(g.fixHeight($(g.gDiv).height()),$(a).hover(function(){g.fixHeight(),$(this).addClass("dragging")},function(){g.colresize||$(this).removeClass("dragging")}))})}if(p.striped&&$("tbody tr:odd",g.bDiv).addClass("erow"),p.resizable&&"auto"!=p.height&&(g.vDiv.className="vGrip",$(g.vDiv).mousedown(function(a){g.dragStart("vresize",a)}).html("<span></span>"),$(g.bDiv).after(g.vDiv)),p.resizable&&"auto"!=p.width&&!p.nohresize&&(g.rDiv.className="hGrip",$(g.rDiv).mousedown(function(a){g.dragStart("vresize",a,!0)}).html("<span></span>").css("height",$(g.gDiv).height()),$.browser.msie&&$.browser.version<7&&$(g.rDiv).hover(function(){$(this).addClass("hgOver")},function(){$(this).removeClass("hgOver")}),$(g.gDiv).append(g.rDiv)),p.usepager){g.pDiv.className="pDiv",g.pDiv.innerHTML='<div class="pDiv2"></div>',$(g.bDiv).after(g.pDiv);var html=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">'+p.pagetext+' <input type="text" size="4" value="1" /> '+p.outof+' <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';if($("div",g.pDiv).html(html),$(".pReload",g.pDiv).click(function(){g.populate()}),$(".pFirst",g.pDiv).click(function(){g.changePage("first")}),$(".pPrev",g.pDiv).click(function(){g.changePage("prev")}),$(".pNext",g.pDiv).click(function(){g.changePage("next")}),$(".pLast",g.pDiv).click(function(){g.changePage("last")}),$(".pcontrol input",g.pDiv).keydown(function(a){13==a.keyCode&&g.changePage("input")}),$.browser.msie&&$.browser.version<7&&$(".pButton",g.pDiv).hover(function(){$(this).addClass("pBtnOver")},function(){$(this).removeClass("pBtnOver")}),p.useRp){for(var opt="",sel="",nx=0;nx<p.rpOptions.length;nx++)sel=p.rp==p.rpOptions[nx]?'selected="selected"':"",opt+="<option value='"+p.rpOptions[nx]+"' "+sel+" >"+p.rpOptions[nx]+"&nbsp;&nbsp;</option>";$(".pDiv2",g.pDiv).prepend("<div class='pGroup'><select name='rp'>"+opt+"</select></div> <div class='btnseparator'></div>"),$("select",g.pDiv).change(function(){p.onRpChange?p.onRpChange(+this.value):(p.newp=1,p.rp=+this.value,g.populate())})}if(p.searchitems){$(".pDiv2",g.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>"),$(".pSearch",g.pDiv).click(function(){$(g.sDiv).slideToggle("fast",function(){$(".sDiv:visible input:first",g.gDiv).trigger("focus")})}),g.sDiv.className="sDiv";for(var sitems=p.searchitems,sopt="",sel="",s=0;s<sitems.length;s++)""==p.qtype&&1==sitems[s].isdefault?(p.qtype=sitems[s].name,sel='selected="selected"'):sel="",sopt+="<option value='"+sitems[s].name+"' "+sel+" >"+sitems[s].display+"&nbsp;&nbsp;</option>";""==p.qtype&&(p.qtype=sitems[0].name),$(g.sDiv).append("<div class='sDiv2'>"+p.findtext+" <input type='text' value='"+p.query+"' size='30' name='q' class='qsbox' /> "+" <select name='qtype'>"+sopt+"</select></div>"),$("input[name=q]",g.sDiv).keydown(function(a){13==a.keyCode&&g.doSearch()}),$("select[name=qtype]",g.sDiv).keydown(function(a){13==a.keyCode&&g.doSearch()}),$("input[value=Clear]",g.sDiv).click(function(){$("input[name=q]",g.sDiv).val(""),p.query="",g.doSearch()}),$(g.bDiv).after(g.sDiv)}}$(g.pDiv,g.sDiv).append("<div style='clear:both'></div>"),p.title&&(g.mDiv.className="mDiv",g.mDiv.innerHTML='<div class="ftitle">'+p.title+"</div>",$(g.gDiv).prepend(g.mDiv),p.showTableToggleBtn&&($(g.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>'),$("div.ptogtitle",g.mDiv).click(function(){$(g.gDiv).toggleClass("hideBody"),$(this).toggleClass("vsble")}))),g.cdropleft=document.createElement("span"),g.cdropleft.className="cdropleft",g.cdropright=document.createElement("span"),g.cdropright.className="cdropright",g.block.className="gBlock";var gh=$(g.bDiv).height(),gtop=g.bDiv.offsetTop;if($(g.block).css({width:g.bDiv.style.width,height:gh,background:"white",position:"relative",marginBottom:-1*gh,zIndex:1,top:gtop,left:"0px"}),$(g.block).fadeTo(0,p.blockOpacity),$("th",g.hDiv).length){g.nDiv.className="nDiv",g.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>",$(g.nDiv).css({marginBottom:-1*gh,display:"none",top:gtop}).noSelect();var cn=0;$("th div",g.hDiv).each(function(){var a=$("th[axis='col"+cn+"']",g.hDiv)[0],b='checked="checked"';"none"==a.style.display&&(b=""),$(this).parent().hasClass("data-table-checkbox-header")||$("tbody",g.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+b+' class="togCol" value="'+cn+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>"),cn++}),$.browser.msie&&$.browser.version<7&&$("tr",g.nDiv).hover(function(){$(this).addClass("ndcolover")},function(){$(this).removeClass("ndcolover")}),$("td.ndcol2",g.nDiv).click(function(){return $("input:checked",g.nDiv).length<=p.minColToggle&&$(this).prev().find("input")[0].checked?!1:g.toggleCol([$(this).prev().find("input").val()])}),$("input.togCol",g.nDiv).click(function(){return $("input:checked",g.nDiv).length<p.minColToggle&&0==this.checked?!1:($(this).parent().next().trigger("click"),void 0)}),$(g.gDiv).prepend(g.nDiv),$(g.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){return $(g.nDiv).toggle(),!0}),p.showToggleBtn&&$(g.gDiv).prepend(g.nBtn)}return $(g.iDiv).addClass("iDiv").css({display:"none"}),$(g.bDiv).append(g.iDiv),$(g.bDiv).hover(function(){$(g.nDiv).hide(),$(g.nBtn).hide()},function(){g.multisel&&(g.multisel=!1)}),$(g.gDiv).hover(function(){},function(){$(g.nDiv).hide(),$(g.nBtn).hide()}),$(document).mousemove(function(a){g.dragMove(a)}).mouseup(function(){g.dragEnd()}).hover(function(){},function(){g.dragEnd()}),$.browser.msie&&$.browser.version<7&&($(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",g.gDiv).css({width:"100%"}),$(g.gDiv).addClass("ie6"),"auto"!=p.width&&$(g.gDiv).addClass("ie6fullwidthbug")),g.rePosDrag(),g.fixHeight(),t.p=p,t.grid=g,p.url&&p.autoload&&g.populate(),t};var docloaded=!1;$(document).ready(function(){docloaded=!0}),$.fn.flexigrid=function(a){return this.each(function(){function b(a,b){var c=g.next().next().find('input[value = "'+a+'"]');b?c.attr("checked","checked"):c.removeAttr("checked")}function c(){var a=g.next().next().find('input[value != "(Toggle all)"]'),c=!0;a.each(function(a,d){(!d.checked&&-1!=j.indexOf(d.value)||d.checked&&-1==j.indexOf(d.value))&&(h.toggleCol([d.value],!d.checked),b(d.value,!d.checked)),d.checked||(c=!1)}),b("(Toggle all)",c)}function d(a){var b="Not all",c=$(a).next().next().find('input[value = "(Toggle all)"]');c.is(":checked")&&(b="All"),$(a).next().find(".ui-dropdownchecklist-text").html(b).css({color:"#333"})}if(docloaded)$.addFlex(this,a);else{$(this).hide();var e=this;$(document).ready(function(){$.addFlex(e,a)})}var f=$(".hDivBox > table > thead > tr > th").slice(1),g=$("select.column-select"),h=this.grid,i=f.length,j=[""];$.each(f,function(a){"visible"==$(this).attr("data-ds")&&j.push((a+1).toString())});var k=[""];null==sessionStorage.getItem("hiddenColumns")?(k=[""],$.each(f,function(a){"hidden"==$(this).attr("data-ds")&&k.push((a+1).toString())})):k=(sessionStorage.getItem("hiddenColumns")||"").split(","),this.grid.toggleCol(k,!1);for(var l=0;i>l;l++){var m=$(f[l]),n=$("<option>").attr("value",l+1).html(m.find("a, span").html());k.indexOf((l+1).toString())<0&&n.attr("selected","selected"),g.append(n)}g.dropdownchecklist({firstItemChecksAll:!0,width:170,zIndex:1010,textFormatFunction:function(a){if(!a.length)return"Not all";var b=$(a[0]).parent().next().next().find('input[value = "(Toggle all)"]');return b.is(":checked")?"All":"Not all"},onComplete:d,onItemClick:function(a,b){var c=$(a).val(),d=$(b).next().next().find('input[value = "(Toggle all)"]');if("(Toggle all)"!=c)h.toggleCol([c],$(a).is(":checked"));else{var e=d.is(":checked");$(b).next().next().find('input[value != "(Toggle all)"]').each(function(a,b){h.toggleCol([$(b).val()],e)})}},explicitClose:"close"}),g.next().next().find(".ui-dropdownchecklist-item").eq(0).after($('<div class="ui-state-default ui-dropdownchecklist-item js-default-columns" style="padding-left: 3px;"><span class="ui-dropdownchecklist-text">Reset to defaults</span></div>').hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")})),$(".js-default-columns").on("click",function(){return c(),d(g),!1}),d(g)})},$.fn.flexReload=function(){return this.each(function(){this.grid&&this.p.url&&this.grid.populate()})},$.fn.flexOptions=function(a){return this.each(function(){this.grid&&$.extend(this.p,a)})},$.fn.flexToggleCol=function(a,b){return this.each(function(){this.grid&&this.grid.toggleCol([a],b)})},$.fn.flexAddData=function(a){return this.each(function(){this.grid&&this.grid.addData(a)})},$.fn.noSelect=function(a){var b=null==a?!0:a;return b?this.each(function(){$.browser.msie||$.browser.safari?$(this).bind("selectstart",function(){return!1}):$.browser.mozilla?($(this).css("MozUserSelect","none"),$("body").trigger("focus")):$.browser.opera?$(this).bind("mousedown",function(){return!1}):$(this).attr("unselectable","on")}):this.each(function(){$.browser.msie||$.browser.safari?$(this).unbind("selectstart"):$.browser.mozilla?$(this).css("MozUserSelect","inherit"):$.browser.opera?$(this).unbind("mousedown"):$(this).removeAttr("unselectable","on")})},$.fn.flexSearch=function(){return this.each(function(){this.grid&&this.p.searchitems&&this.grid.doSearch()})}}(jQuery),!function(a){"use strict";function b(){a(".context-menu").css("display","none").data("e",void 0)
}var c=function(c){a(c).on("contextmenu.context-menu.data-api",this.show),a("html").on("click.context-menu.data-api",b)};c.prototype={constructor:c,show:function(c){var d=a(this);if(!d.is(".disabled, :disabled"))return b(),a(d.data("context-menu")).data("e",c).css("position","fixed").css("left",c.clientX).css("top",c.clientY).css("display","block"),!1}},a.fn.contextmenu=function(){return this.each(function(){var b=a(this);b.data("context-menu-obj")||b.data("context-menu-obj",new c(this))})},a.fn.contextmenu.Constructor=c}(window.jQuery);